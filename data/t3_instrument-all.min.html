!function(){return window.__AppPulseWeb||window._HPAPC.isChromePlugin||document.documentMode<9?void console.log("### App Pulse Web instrumentation is not Loaded, already exists!"):(console.log("### Loading App Pulse Web instrumentation"),window.__AppPulseWeb=!0,void function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){r(1),r(2),r(3),r(16),r(5),r(17),e.exports=r(18)},function(e,t){var r=function(){function e(){}return e.APLog=function(e){var t=new Date,r=t.getHours()+":"+t.getMinutes()+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds()+":"+t.getMilliseconds()),n="#AppPulse Log ["+r+"]: "+e;console.log(n)},e.prettyLog=function(e,t){if("undefined"!=typeof console){var r;if("undefined"!=typeof console.group){console.group(e);for(r in t)console.log(r+" = "+t[r]);console.groupEnd()}else{for(var n="",a=0;a<t.length;a++)r=t[a],n+=t;console.log(e+n)}}},e.inlineExists=function(){return e.defined(window.APPW)},e.getNavType=function(){return this.defined(window.performance)&&this.defined(performance.navigation)?performance.navigation.type:0},e.getPageNavStart=function(){return this.defined(window.performance)&&this.defined(performance.timing)?performance.timing.navigationStart:0},e.getCookie=function(e){if(!e)return null;e=" "+e+"=";var t,r;return r=" "+window.document.cookie+";",(t=r.indexOf(e))>=0?(t+=e.length,r=r.substring(t,r.indexOf(";",t))):null},e.setCookie=function(t,r,n,a){var i,o,s,c,d=[];if(!r)return!1;if("string"==typeof n)d.push(encodeURIComponent(n));else for(i in n)n.hasOwnProperty(i)&&d.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return o=r+"="+d,s=[o,"path=/"],a&&(c=new Date,c.setTime(c.getTime()+1e3*a),c=c.toUTCString(),s.push("expires="+c)),o.length<4e3&&(t.document.cookie=s.join("; "),d===e.getCookie(r))},Object.defineProperty(e,"hasStorage",{get:function(){if(!this.defined(this._hasStorage)){var e="test";try{localStorage.setItem(e,e),localStorage.removeItem(e),this.hasStorage=!0}catch(t){return this._hasStorage=!1,!1}}return this._hasStorage},set:function(e){this._hasStorage=e},enumerable:!0,configurable:!0}),e.setStorageItemOnTime=function(e,t,r){this.hasStorage&&(localStorage.setItem(e,t),localStorage.setItem(e+"_TIME",""+(Date.now()+1e3*r)))},e.getStorageItemOnTime=function(e){if(this.hasStorage&&localStorage.getItem(e)){var t=localStorage.getItem(e+"_TIME");if(parseInt(t)>Date.now())return localStorage.getItem(e);this.deleteStorageItemOnTime(e)}return null},e.deleteStorageItemOnTime=function(e){this.hasStorage&&(localStorage.removeItem(e),localStorage.removeItem(e+"_TIME"))},Object.defineProperty(e,"browserName",{get:function(){if(!this.defined(this._browserName)){var e,t=navigator.userAgent,r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return e=/\brv[ :]+(\d+)/g.exec(t)||[],this._browserName="msie",this._browserVer=e[1]||"",this._browserName;if("Chrome"===r[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!==e))return this._browserName=e[0].replace("OPR","Opera"),this._browserVer=e[1]||"",this._browserVer;r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&r.splice(1,1,e[1]),this._browserName=r[0],this._browserVer=r[1]}return this._browserName},enumerable:!0,configurable:!0}),Object.defineProperty(e,"browserVer",{get:function(){if(!this.defined(this._browserVer)){var e,t=navigator.userAgent,r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(r[1]))return e=/\brv[ :]+(\d+)/g.exec(t)||[],this._browserName="msie",this._browserVer=e[1]||"",this._browserVer;if("Chrome"===r[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!==e))return this._browserName=e[0].replace("OPR","Opera"),this._browserVer=e[1]||"",this._browserVer;r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&r.splice(1,1,e[1]),this._browserName=r[0],this._browserVer=r[1]}return this._browserVer},enumerable:!0,configurable:!0}),e.parseHost=function(e){if(""!==e){var t=document.createElement("a");return t.href=e,t.hostname}return""},e.getFullURL=function(e){var t=document.createElement("a");return t.href=e,t.href},e.convertToCluster=function(t){if(e.functionDefined(window.convertUrl_appPulse))return window.convertUrl_appPulse.call(this,t);var r=t.replace(/\b([a-f0-9]{16}|[a-f0-9]{32}|[a-f0-9]{64})\b/,"*");r=r.replace(/\b[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}\b/,"*"),r=r.replace(/([\w\-\*]+\.(?:js|jpg|png|csv|php|css|gif|woff|eot|ttf|svg)\b)/,"*");var n,a=r.split("?"),i=a[0],o="";if(a.length>1){o="*";var n=a[1].split("#");n.length>1&&(o+="#"+n[1])}return t=""==o?r:i+"?"+o},e.maskParams=function(e){var t=e.split("?");if(t.length>1){var r=t[0];t=t[1].split("&");var n=t.map(function(e){var t=e.split("=");return t[0]+"=*"});return r+"?"+n.join("&")}return e},e.getPageName=function(e){var t=e.split("?");return t.length>1?t[0]:e},e.maskSensitiveData=function(t){if(!e.defined(t))return null;var r=t.replace(/[\d\-,\.]{4,20}/g,"*****");return r=r.replace(/[a-zA-Z0-9+&*-]+(?:\.[a-zA-Z0-9_+&*-]+)*@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,7}/g,"*****"),r=r.replace(/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/g,"*****"),r=r.replace(/((((https?|ftps?|gopher|telnet|nntp):\/\/)|(mailto:|news:))(%[0-9A-Fa-f]{2}|[-()_.!~*';\/?:@&=+$,A-Za-z0-9])+)([).!';\/?:,][[:blank:]])?/g,"*****")},e.isError=function(e){return e>399&&e<600||0===e},e.sessionIdGen=function(){var e=function(e){return e<0?NaN:e<=30?0|Math.random()*(1<<e):e<=53?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<e-30))*(1<<30):NaN},t=function(e,t){for(var r=e.toString(16),n=t-r.length,a="0";n>0;n>>>=1,a+=a)1&n&&(r=a+r);return r};return t(e(32),8)+t(e(16),4)+t(16384|e(12),4)+t(32768|e(14),4)+t(e(48),12)},e.utf8_encode=function(e){var t,r,n="";for(e=e.replace(/\r\n/g,"\n"),r=0;r<e.length;r++)t=e.charCodeAt(r),t<128?n+=String.fromCharCode(t):t>127&&t<2048?(n+=String.fromCharCode(t>>6|192),n+=String.fromCharCode(63&t|128)):(n+=String.fromCharCode(t>>12|224),n+=String.fromCharCode(t>>6&63|128),n+=String.fromCharCode(63&t|128));return n},e.encode64=function(t){var r,n,a,i,o,s,c,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",u=0;t=e.utf8_encode(t);do r=t.charCodeAt(u++),n=t.charCodeAt(u++),a=t.charCodeAt(u++),i=r>>2,o=(3&r)<<4|n>>4,s=(15&n)<<2|a>>6,c=63&a,isNaN(n)?s=c=64:isNaN(a)&&(c=64),l=l+d.charAt(i)+d.charAt(o)+d.charAt(s)+d.charAt(c),r=n=a="",i=o=s=c="";while(u<t.length);return l},e.createXHRObj=function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw new Error("Could not create HTTP request object.")},e.defined=function(e){return"undefined"!=typeof e&&null!=e},e.functionDefined=function(e){return"function"==typeof e&&null!=e},e.__eumIsWeb=!0,e.__eumIsDebug=!0,e}();t.WebUtils=r},function(e,t,r){var n=r(1),a=n.WebUtils.inlineExists()?window.APPW.ORIGINALS:{};t.origSetTimeout=n.WebUtils.inlineExists()?a.setTimeout:window.setTimeout,t.origClearTimeout=window.clearTimeout,t.origXHR=n.WebUtils.createXHRObj(),t.origOpen=n.WebUtils.inlineExists()?a.xhrOpen:t.origXHR.constructor.prototype.open,t.origSend=n.WebUtils.inlineExists()?a.xhrSend:t.origXHR.constructor.prototype.send,t.origAbort=t.origXHR.constructor.prototype.abort,t.origSetRequestHeaders=t.origXHR.constructor.prototype.setRequestHeader,t.origNodeAttachEvent=Node.prototype.attachEvent,t.origNodeDetachEvent=Node.prototype.detachEvent,t.origWindowAttachEvent=window.attachEvent,t.origWindowDetachEvent=window.detachEvent,t.oldNodeEventListenerAdd=Node.prototype.addEventListener,t.oldCreateElement=document.createElement,t.oldWindowRemoveListener=window.removeEventListener,t.oldAppendChild=Node.prototype.appendChild,t.oldNodeRemoveEventListener=Node.prototype.removeEventListener,t.origWindowError=window.onerror,t.origConsoleError=console.error,t.origWindowAlert=window.alert,t.origRequestAnimationFrame=window.requestAnimationFrame,t.origCancelAnimationFrame=window.cancelAnimationFrame,t.origPromiseThen=window.Promise?window.Promise.prototype.then:null},function(e,t,r){var n=r(1),a=r(4),i=r(2),o=r(5),s=r(7),c=r(11),d=r(2),l=r(2),u=r(15),p=r(10),h=function(){function e(){this.init()}return e.prototype.overrideInlineFuncs=function(){var t=this;a.inlineFuncs.decreaseCounter=function(e){t.decreaseCounter(e,"XHR - readystate =4 via onreadystate function or onload")},a.inlineFuncs.beforeXHRCB=function(e,t){s.EventTrackerManager.currentEventTracker=e.__EventTracker,e._eumNetworkObject.responseEnd=Date.now();try{e.getResponseHeader("HP_CM_DATA")&&(e._eumNetworkObject.cmData=e.getResponseHeader("HP_CM_DATA"))}catch(r){}n.WebUtils.defined(e._eumNetworkObject.responseStart)||(e._eumNetworkObject.responseStart=e._eumNetworkObject.responseEnd),i.origClearTimeout.call(window,e._eumNetworkObject.settimeoutLongXHR)},a.inlineFuncs.afterXHRCB=function(r){e.reportNetworkData(r),t.decreaseCounter(r,"XHR - readystate =4 via onreadystate function or onload"),i.origSetTimeout.call(window,function(){s.EventTrackerManager.resetCurrentEventTracker()},0)},a.inlineFuncs.fixXHRET=function(e,t){return"DL"===e?s.EventTrackerManager.currentEventTracker=s.EventTrackerManager.documentLoadEvent:"UA"===e&&(s.EventTrackerManager.currentEventTracker=new c.UserActionTracker("","",(!1))),t.__EventTracker=s.EventTrackerManager.currentEventTracker,t.__EventTracker},a.inlineFuncs.increaseCounter=function(e,r){t.increaseCounter(e,r)}},e.prototype.createNetworkObject=function(e){e._eumNetworkObject||(e._eumNetworkObject={},e._eumNetworkObject.msgId=Date.now())},e.prototype.increaseCounter=function(e,t){var r=e.__EventTracker;r&&r.addAsync("XHR - Counter is increased")},e.prototype.decreaseCounter=function(e,t){var r=e.__EventTracker;r&&!e.__asyncRemoved&&(r.removeAsync(t),e.__asyncRemoved=!0)},e.prototype.onCompleteXHR=function(e,t,r){if(!e._reported){var r=n.WebUtils.defined(r)?r:"No Function";a.inlineFuncs.beforeXHRCB(e,r)}if(n.WebUtils.defined(t))try{o.doCallback(e,t,"xhr",arguments,e.__EventTracker)}catch(i){}e._reported||a.inlineFuncs.afterXHRCB(e),e._reported=!0},e.reportNetworkData=function(e){if(e._eumNetworkObject.url&&e._eumNetworkObject.shouldReportXHR){if(("text"===e.responseType||""===e.responseType||!e.responseType)&&null!=e.responseText){var t=e.responseText.length;null!=e.getAllResponseHeaders()&&(t+=e.getAllResponseHeaders().length),e._eumNetworkObject.responseLength=t}e._eumNetworkObject.responseCode=e.status;var r=e._eumNetworkObject,i=0,o=0,c=0,d=0,l=0,h=window.performance.getEntriesByName&&window.performance.getEntriesByName(r.url);h&&h.length>0&&h[0].responseStart>0?(c=parseInt(h[0].startTime.toString())+n.WebUtils.getPageNavStart(),d=parseInt(h[0].responseEnd.toString())+n.WebUtils.getPageNavStart(),o=d-c,i=parseInt(h[0].responseStart.toString())+n.WebUtils.getPageNavStart()):(c=r.requestTime,d=r.responseEnd,l=r.responseStart,o=d-c,i=l&&l-c>=0&&l<=d?l:c),o=parseInt(o.toString());var f=r.cmData,g=a.reporter.parseProbeCMData(f),v=null!==g&&n.WebUtils.defined(g.sr_id)?g.sr_id:-1,m=p.ClassificationMgr.classifyAjaxUrl(r.url),_=!1;n.WebUtils.isError(r.responseCode)&&(u.errorsHandler.xhrErrors++,_=!0);var T={req_st:a.reporter.normalizeClientTime(c),resp_st:a.reporter.normalizeClientTime(i),resp_end:a.reporter.normalizeClientTime(d),req_size:r.requestSize,resp_code:r.responseCode,req_method:r.method,url:m.rawUrl,tr_url:m.classifiedUrl,pg_url:e.pageURIData?e.pageURIData.pageURL:n.WebUtils.maskParams(window.location.href),pg_tr_url:e.pageURIData?e.pageURIData.pageClassifiedURL:a.reporter.pageURL,network_time:o,sr_id:v,pg_sr_id:e.pageURIData?e.pageURIData.pageSrId:a.reporter.pageSrId,pg_start_time:0,is_first_ajax_error:0,is_first_error:0,pg_perceived_dur:0,ended_before_percv:0,resp_length:r.responseLength,pg_is_virtual:e.pageURIData&&e.pageURIData.isVirtualPage?1:0};s.EventTrackerManager.addAjaxToEventTracker(e.__EventTracker,T)}},e.prototype.wrapReadyState=function(e){if(!e._wrappedReady){e._wrappedReady=!0,e._reported=!1;var t=this,r=e.onreadystatechange,n=e.onload,a=e.onerror;if(4!==e.readyState){var i=function(){console.log("******* xhrObject.readyState="+e.readyState),4!==e.readyState||r?2===e.readyState&&(e._eumNetworkObject.responseStart=Date.now()):t.onCompleteXHR(e)};e.addEventListener?(e.addEventListener("readystatechange",i,!1),e.addEventListener("load",function(){t.onCompleteXHR(e)},!1),e.addEventListener("error",function(){t.onCompleteXHR(e)},!1)):e.attachEvent&&(e.attachEvent("onreadystatechange",i),e.attachEvent("load",function(){t.onCompleteXHR(e)}),e.attachEvent("error",function(){t.onCompleteXHR(e)})),r&&(e.onreadystatechange=function(){4===e.readyState&&t.onCompleteXHR(e,r,"oldReadyStateFunc")}),n&&(e.onload=function(){console.log("XHR - onload function called"),t.onCompleteXHR(e,n,"oldOnLoadFunc")}),a&&(e.onerror=function(){t.onCompleteXHR(e,a,"oldOnErrorFunc")})}}},e.prototype.init=function(){var e=n.WebUtils.createXHRObj(),t=l.origOpen,r=d.origSend,o=e.constructor.prototype.abort,c=e.constructor.prototype.setRequestHeader,u=this;this.overrideInlineFuncs(),e.constructor.prototype.abort=function(){this.__EventTracker&&!this.__asyncRemoved&&(this.__EventTracker.removeAsync("XHR - counter decreased due to Abort",{isCancellation:!0}),this.__asyncRemoved=!0),o.apply(this,arguments)},e.constructor.prototype.setRequestHeader=function(e,t){u.createNetworkObject(this),e&&t&&(this._eumNetworkObject.requestSize+=e.length+2+t.length+1);try{c.apply(this,Array.prototype.slice.call(arguments))}catch(r){}},e.constructor.prototype.open=function(e,r){u.createNetworkObject(this),this.__eumUrl=r;var a=n.WebUtils.getFullURL(r);if(0!==a.toLowerCase().indexOf("file://")&&a.toLowerCase().indexOf("hpclientmon")===-1){var i=0;i=e.length+1+a.length+8,this._eumNetworkObject.url=a,this._eumNetworkObject.requestSize=i}this._eumNetworkObject.method=e;try{t.apply(this,Array.prototype.slice.call(arguments))}catch(o){}},e.constructor.prototype.send=function(e){this.__asyncRemoved=!1;var t=this;if(this.__eumUrl&&this.__eumUrl.toLowerCase().indexOf("hpclientmon")>-1)try{r.apply(this,arguments)}catch(n){}else{console.log("ET:"+s.EventTrackerManager.currentEventTracker),s.EventTrackerManager.currentEventTracker&&(this.__EventTracker=s.EventTrackerManager.currentEventTracker,a.inlineFuncs.increaseCounter(this,"XHR - Send")),u.wrapReadyState(this),this._wrappedReady||i.origSetTimeout.call(window,function(){u.wrapReadyState(t)},10),this._eumNetworkObject.shouldReportXHR=!0,this._eumNetworkObject.settimeoutLongXHR=i.origSetTimeout.call(window,function(){t._eumNetworkObject.shouldReportXHR=!1},12e4),this._eumNetworkObject.requestTime=Date.now(),this.__EventTracker&&(this.pageURIData=this.__EventTracker.getPageURIData()),e&&(this._eumNetworkObject.requestSize+=e.length);try{r.apply(this,Array.prototype.slice.call(arguments))}catch(n){}}}},e}();t.XHRWrapper=h;new h},function(e,t,r){var n=r(2),a=r(1);t.inlineFuncs=a.WebUtils.inlineExists()?window.APPW.FUNCS:{};var i=function(){function e(){this._realPageLoadReported=!1,this._pageSrId=-1,this._pageURL="",this._userPerceivedDur=0,this._loadBalancerID="",this.headerMetas=["session_id","cl_tm_offset","msg_t","app_key","br_name","br_ver","os_name","os_ver","lang","inf_version","visit_time"],this.pageReqMetas=["con_st","con_end","dom_lk_end","dom_lk_st","dom_con_ld_ev_end","dom_con_ld_ev_st","dom_complete","fetch_st","ld_ev_end","ld_ev_st","nav_st","nav_type","nt_red_cnt","red_end","red_st","req_st","res_st","sec_con_st","unl_ev_end","unl_ev_st","res_end","dom_intr","dom_load","referrer","br_total_time","title","pg_ld_usr_percv","is_first","sr_id","url","tr_url"],this.xhrReqMetas=["req_st","resp_st","resp_end","req_size","resp_code","req_method","url","tr_url","pg_url","pg_tr_url","sr_id","pg_sr_id","network_time","pg_start_time","is_first_ajax_error","is_first_error","pg_perceived_dur","ended_before_percv","resp_length","pg_is_virtual"],this.virtualPageReqMetas=["pg_st","host_pg","pg_ld_usr_percv","pg_name","is_first"],this.jsErrorMetas=["file_url","msg","line","col","func","name","trace","er_time","sr_id","pg_tr_url","pg_url","pg_start_time","is_first_js_error","is_first_error","pg_is_virtual"],this.dataHolderNames={sessionId:"HP_SESSION",rumMsg:"HP_RUM_MSG",timeOffset:"HP_SERVER_OFFSET"},this.confData={},this.data={},this.isFirstReqSent=!1,this.init()}return Object.defineProperty(e.prototype,"lastSessionUpdatedTS",{get:function(){return this._lastSessionUpdatedTS},set:function(e){this._lastSessionUpdatedTS=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFirst",{get:function(){return this._isFirst},set:function(e){this._isFirst=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(e){this._sessionId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageSrId",{get:function(){return this._pageSrId},set:function(e){this._pageSrId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageURL",{get:function(){return this._pageURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realPageLoadReported",{get:function(){return this._realPageLoadReported},set:function(e){this._realPageLoadReported=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userPerceivedDur",{get:function(){return this._userPerceivedDur},set:function(e){this._userPerceivedDur=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadBalancerID",{get:function(){return this._loadBalancerID},set:function(e){this._loadBalancerID=e},enumerable:!0,configurable:!0}),e.prototype.initRUMMsgToStorage=function(){if(a.WebUtils.getStorageItemOnTime(this.dataHolderNames.rumMsg)){var e=a.WebUtils.getStorageItemOnTime(this.dataHolderNames.rumMsg);this.sendData(e),a.WebUtils.deleteStorageItemOnTime(this.dataHolderNames.rumMsg)}},e.prototype.updateRUMMsgToStorage=function(){var e=this.convertToRUMFormat(this.data);a.WebUtils.hasStorage&&this.realPageLoadReported&&a.WebUtils.setStorageItemOnTime(this.dataHolderNames.rumMsg,e,86400)},e.prototype.updateSession=function(e){if(!(this.lastSessionUpdatedTS>Date.now())){var t;a.WebUtils.hasStorage&&a.WebUtils.getStorageItemOnTime(this.dataHolderNames.sessionId)&&(t=a.WebUtils.getStorageItemOnTime(this.dataHolderNames.sessionId));var r=!e||(0!==a.WebUtils.getNavType()||location.hostname==a.WebUtils.parseHost(document.referrer));t&&r?this.isFirst=!1:(t=a.WebUtils.sessionIdGen(),this.isFirst=!0),this.sessionId=t,this.lastSessionUpdatedTS=Date.now()+1e4,a.WebUtils.setStorageItemOnTime(this.dataHolderNames.sessionId,""+this.sessionId,1800)}},e.prototype.prepareHeaderMsg=function(e,t){var r="";if(a.WebUtils.defined(e)&&e.length>0){r=t+";;";for(var n=0;n<e.length;n++)r+=e[n]+";;";r+=r.length>0?"\n":""}return r},e.prototype.prepareMsg=function(e,t){var r="";if(a.WebUtils.defined(e)&&a.WebUtils.defined(t)&&t.length>0){for(var n=0;n<t.length;n++)t[n]in e&&(r+=(a.WebUtils.defined(e[t[n]])?e[t[n]]:"")+";;");return r+=r.length>0?"\n":""}},e.prototype.reportInstrumentation=function(e,t,r){var n=this.prepareMsg(e,t);switch(this.sendLargeMSG(n),r){case"realpage":this.data.page.push(n),this.realPageLoadReported=!0,this.isFirst=!1;break;case"error":this.data.jsErrors.push(n);break;case"virtualpage":this.data.virtualPages.push(n),this.isFirst=!1;break;case"xhr":this.data.xhrsData.push(e),this.data.xhrs.push(n)}this.updateRUMMsgToStorage()},e.prototype.sendLargeMSG=function(e){var t=this.convertToRUMFormat(this.data),r=a.WebUtils.encode64(t),n=r.length;n+a.WebUtils.encode64(e).length>8e3&&this.reportData(this.data)},e.prototype.dataExist=function(){return this.data.xhrs.length>0||this.data.jsErrors.length>0||this.data.virtualPages.length>0||this.data.page.length>0},e.prototype.resetData=function(){this.data.xhrs.length=0,this.data.xhrsData.length=0,this.data.page.length=0,this.data.virtualPages.length=0,this.data.jsErrors.length=0,a.WebUtils.deleteStorageItemOnTime(this.dataHolderNames.rumMsg)},e.prototype.parseProbeCMData=function(e){var t=e;if(a.WebUtils.defined(t)&&t.length>0){t=decodeURIComponent(t);try{var r=JSON.parse(t);return r}catch(n){}}return null},e.prototype.setConfigs=function(){var e=window,t=a.WebUtils.defined(e._HPAPC)?e._HPAPC.cm_info:-1;if(t!==-1){var r=this.parseProbeCMData(t);"undefined"!==r&&null!==r?(this.confData.appKey=a.WebUtils.defined(r.app_key)?r.app_key:-1,this.pageSrId=a.WebUtils.defined(r.sr_id)?r.sr_id:-1,this._pageURL=a.WebUtils.defined(r.sr_url)?r.sr_url:this.pageSrId===-1?"":this.pageSrId):(this.pageSrId=-1,this._pageURL="")}else this.pageSrId=-1,this._pageURL="";e._HPAPC&&e._HPAPC.beaconUrl?this.confData.fbackServer=e._HPAPC.beaconUrl:this.confData.fbackServer="http://myd-vm23063.hpswlabs.adapps.hp.com:81/hpclientmon/browser_data/",window._HPAPC&&window._HPAPC.app_key?this.confData.appKey=window._HPAPC.app_key:this.confData.appKey==-1&&(this.confData.appKey="85807xp9ck");for(var n in this.dataHolderNames)this.dataHolderNames.hasOwnProperty(n)&&(this.dataHolderNames[n]+="_"+this.confData.appKey);this.confData.appName="",this.confData.appVersion="",this.confData.OSName=e.navigator.platform,this.confData.browser=a.WebUtils.browserName,this.confData.browserVersion=a.WebUtils.browserVer,this.confData.timeZoneOffset=(new Date).getTimezoneOffset()},e.prototype.setSyncOffsetTime=function(){if(!a.WebUtils.defined(this.confData.syncOffsetTime))if(a.WebUtils.hasStorage&&a.WebUtils.getStorageItemOnTime(this.dataHolderNames.timeOffset))try{this.confData.syncOffsetTime=parseInt(a.WebUtils.getStorageItemOnTime(this.dataHolderNames.timeOffset))}catch(e){}else try{this.confData.syncOffsetTime=0,n.origOpen.call(n.origXHR,"post",this.confData.fbackServer+"getServerTime");var t=Date.now();n.origSend.call(n.origXHR);var r=this;n.origXHR.onreadystatechange=function(){if(4==n.origXHR.readyState&&200==n.origXHR.status){var e=parseInt(n.origXHR.responseText);if(isNaN(e))r.confData.syncOffsetTime=0;else try{var i=t-e;r.confData.syncOffsetTime=i,a.WebUtils.setStorageItemOnTime(r.dataHolderNames.timeOffset,""+i,86400)}catch(o){a.WebUtils.setCookie(window,r.dataHolderNames.timeOffset,"0",86400),r.confData.syncOffsetTime=0}}}}catch(e){}},e.prototype.normalizeClientTime=function(e){return e>0?e-this.confData.syncOffsetTime:0},e.prototype.init=function(){this.data.xhrs=[],this.data.xhrsData=[],this.data.page=[],this.data.virtualPages=[],this.data.jsErrors=[],this.lastSessionUpdatedTS=Date.now(),this.setConfigs(),this.updateSession(!0),this.initRUMMsgToStorage(),this.setSyncOffsetTime();var e=this;setInterval(function(){var t;a.WebUtils.hasStorage&&(t=a.WebUtils.getStorageItemOnTime(e.dataHolderNames.sessionId)),t&&e.reportData(e.data)},3e4)},e.prototype.convertToRUMFormat=function(e){var t,r="",n="",i="",o="",s="";try{if(a.WebUtils.defined(e)){if(e.page.length>0&&(n=e.page[0]),e.xhrs.length>0)for(t=0;t<e.xhrs.length;t++)o+=e.xhrs[t];if(e.virtualPages.length>0)for(t=0;t<e.virtualPages.length;t++)s+=e.virtualPages[t];if(e.jsErrors.length>0)for(t=0;t<e.jsErrors.length;t++)i+=e.jsErrors[t]}r+=this.prepareHeaderMsg(this.headerMetas,"ST"),r=r+this.sessionId+";;"+this.confData.timeZoneOffset+";;"+this.normalizeClientTime(Date.now())+";;"+this.confData.appKey+";;"+this.confData.browser+";;1;;"+this.confData.OSName+";;;;"+navigator.language+";;1;;"+a.WebUtils.getPageNavStart()+";;\n",n&&(r+=this.prepareHeaderMsg(this.pageReqMetas,"BROWSERHPAGE"),r=r+"BROWSERPAGE;;\n"+n),o&&(r+=this.prepareHeaderMsg(this.xhrReqMetas,"BROWSERHREQUEST"),r=r+"BROWSERREQUEST;;\n"+o),s&&(r+=this.prepareHeaderMsg(this.virtualPageReqMetas,"BROWSERHVIRTUALPAGE"),r=r+"BROWSERVIRTUALPAGE;;\n"+s),i&&(r+=this.prepareHeaderMsg(this.jsErrorMetas,"JSHERRORS"),r=r+"JSERRORS;;\n"+i)}catch(c){}return r},e.prototype.reportData=function(e){if(this.dataExist()&&this.realPageLoadReported){var t=this.convertToRUMFormat(e);this.sendData(t)}},e.prototype.sendData=function(e){if(e){var t=a.WebUtils.encode64(e);try{new XMLHttpRequest;n.origOpen.call(n.origXHR,"post",this.confData.fbackServer+"browser_data/"+this.sessionId+"/"),"Safari"==a.WebUtils._browserName&&n.origXHR.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),this.resetData(),n.origSend.call(n.origXHR,t)}catch(r){}}},e}(),o=new i;t.reporter=o},function(e,t,r){function n(){try{return window.self!==window.top}catch(e){return!0}}function a(e,t){if(!e._addedListener){var r=t||T.EventTrackerManager.currentEventTracker,n=function(){delete e._addedListener,e.removeEventListener("load",n,!0),e.removeEventListener("error",n,!0)};n._eumThread=r,e.addEventListener("load",n,!0),e.addEventListener("error",n,!0),e._addedListener=!0,r&&r.images.push(e)}}function i(e){if(e.shouldReportData()){e.reported=!0;try{var r=e.lastPop||t.dateNow(),n=r-e.startTime;e.reportData(n)}catch(a){}}}function o(e){}function s(){for(var e=document.getElementsByTagName("iframe"),t=0;t<e.length;t++)o(e[t])}function c(){for(var e=(t.dateNow(),[]),r=document.getElementsByTagName("img"),n=0,a=r.length;n<a;n++)r[n].complete||e.push(r[n]);return e}function d(e){if(e.d3){var t,r,n=c();if(n.length>0)for(t=0,r=n.length;t<r;t++)a(n[t],e)}}function l(e,r,n,a,i){switch(n){case"addEventListener":"function"==typeof r?r.apply(e,a):r.handleEvent&&r.handleEvent.apply(r,a);break;case"setTimeout":"function"!=typeof r&&(0,eval)(r),"function"==typeof r&&a?r.apply(window,a):r.call(window);break;case"xhr":r.apply(e,a);break;case"requestAnimationFrame":r.apply(e,a)}y&&!t.isIframe&&s(),i&&d(i)}function u(){T.EventTrackerManager.currentEventTracker&&(T.EventTrackerManager.currentEventTracker.d3,T.EventTrackerManager.resetCurrentEventTracker())}function p(e){T.EventTrackerManager.currentEventTracker&&(T.EventTrackerManager.virtualPageLoadEvent=T.EventTrackerManager.currentEventTracker)}function h(e,r,n,a){var o,s=b;if(a=a||k,"click"===n&&(v.reporter.updateSession(!1),T.EventTrackerManager.isClicked=!0),s||T.EventTrackerManager.detectAndSetEventTrackerForEvent(n,r,a),a.uaEmptyCallback)return void T.EventTrackerManager.delayResetCurrentEventTracker(t.d4SplitThreshold);o=T.EventTrackerManager.currentEventTracker,o&&(o.addAsync("wrapAddEventListenerCallBack"),o.d3),s||(b=!0),r.__eumAddEventListenerTarget=e;try{l(e,a,"addEventListener",[r],o)}catch(c){s||(b=!1)}if(s||(b=!1),o&&(o.removeAsync("wrapAddEventListenerCallBack"),o.d3),!s){if("popstate"===n)return void T.EventTrackerManager.delayResetCurrentEventTracker(t.d4SplitThreshold);if(T.EventTrackerManager.currentEventTracker&&T.EventTrackerManager.resetCurrentEventTracker(),o&&o.counter>0){var d=o;o.maxActionTimeoutHandlerId||(o.maxActionTimeoutHandlerId=_.origSetTimeout.call(window,function(){d.counter>0&&(i(o),o.timedOut=!0)},12e4))}}}function f(e,t){var r=this;return function(n){h(r,n,e,t)}}var g=r(1),v=r(4),m=r(6),_=r(2),T=r(7),E=r(4);t.dateNow=Date.now,t.d4SplitThreshold=499,t.isIframe=!1;var w,y=!1,k=function(){},b=!1,C=!1;t.isIframe=n(),t.addEventListenerToImage=a,t.doReportProbe=i,t.doCallback=l,t.closeThread=u;t.setVPageLoadEvent=p,g.WebUtils.inlineExists()&&(E.inlineFuncs.wrappedAddEventListenerCallBack=h),t.wrapAddEventListenerCallBack=f,function(){var e=!1;T.EventTrackerManager.init();var r=function(r){if(!e&&!b){var n=w||{},a=1e3,o=t.dateNow();C=!0;var s=n.eventTracker||T.EventTrackerManager.documentLoadEvent;s&&(s.lastPop+a>=o||s.startTime+a>=o),T.EventTrackerManager.documentLoadEvent&&i(T.EventTrackerManager.documentLoadEvent),e=!0}};m.windowOldEventListenerAdd.call(window,"beforeunload",r),m.windowOldEventListenerAdd.call(window,"pagehide",r)}()},function(e,t,r){var n=r(5),a=r(1),i=r(5),o=r(2),s=r(7);t.windowOldEventListenerAdd=a.WebUtils.inlineExists()?window.APPW.ORIGINALS.windowAddEventListener:window.addEventListener;var c={},d={};document.createElement=function(e){var t=e.toLowerCase();if("img"===t){var r=o.oldCreateElement.call(document,e);return n.addEventListenerToImage(r,s.EventTrackerManager.currentEventTracker),r}return o.oldCreateElement.call(document,e)},o.origNodeAttachEvent&&(Node.prototype.attachEvent=function(e,t){var r=n.wrapAddEventListenerCallBack.call(this,e,t),a=this._eumcbMapAE=this._eumcbMapAE||{};return a[e]=a[e]||{},a[e][t]=r,o.origNodeAttachEvent.call(this,e,r)},Node.prototype.detachEvent=function(e,t){var r=this._eumcbMapAE;return r&&r[e]&&r[e][t]&&(t=r[e][t],delete r[e][t],0===Object.getOwnPropertyNames(r[e]).length&&(delete r[e],0===Object.getOwnPropertyNames(r).length&&delete this._eumcbMapAE)),o.origNodeDetachEvent.call(this,e,t)}),o.origWindowAttachEvent&&(window.attachEvent=function(e,t){var r=n.wrapAddEventListenerCallBack(e,t);d[e]=d[e]||{};var a={};return a[t]=r,d[e]=a,o.origWindowAttachEvent.call(this,e,r)},window.detachEvent=function(e,t){var r=d[e];if(r&&r[t]){var n=o.origWindowDetachEvent(e,r[t]);return delete r[t],0===Object.getOwnPropertyNames(r).length&&delete d[e],n}return o.origWindowDetachEvent.call(this,e,t)}),Node.prototype.addEventListener=function(e,t,r){var a=n.wrapAddEventListenerCallBack.call(this,e,t,r),i=this._eumcbMap=this._eumcbMap||{};i[e]=i[e]||{},i[e][t]=a,o.oldNodeEventListenerAdd.call(this,e,a,r)},Node.prototype.removeEventListener=function(e,t,r){var n=this._eumcbMap;if(n&&n[e]&&n[e][t]){var a=t;t=n[e][a],delete n[e][a],0===Object.getOwnPropertyNames(n[e]).length&&(delete n[e],0===Object.getOwnPropertyNames(n).length&&delete this._eumcbMap)}o.oldNodeRemoveEventListener.call(this,e,t,r)},window.addEventListener=function(e,r,a){var i=n.wrapAddEventListenerCallBack(e,r);c[e]=c[e]||{};var o={};o[r]=i,c[e]=o,t.windowOldEventListenerAdd.call(this,e,i,a)},window.removeEventListener=function(e,t,r){var n=c[e];return n&&n[t]?(o.oldWindowRemoveListener.call(this,e,n[t],r),delete n[t],void(0===Object.getOwnPropertyNames(n).length&&delete c[e])):void o.oldWindowRemoveListener.call(this,e,t,r)},window.alert=function(e){var t=i.dateNow();o.origWindowAlert.call(window,e);var r=i.dateNow()-t;s.EventTrackerManager.currentEventTracker&&s.EventTrackerManager.currentEventTracker.alerts.push(r)}},function(e,t,r){var n,a=r(1),i=r(8),o=r(11),s=r(13),c=r(4),d=r(2),l=r(14),u=r(12);t.EventTrackerManager={currentEventTracker:null,lastEventTracker:null,documentLoadEvent:null,virtualPageLoadEvent:null,firstVirtualPage:!0,isClicked:!1,delayForUA:100,lastPageTracker:null,init:function(){this.documentLoadEvent=new i.DocumentLoadTracker,l.VirtualPageTracker.init(),this.setCurrentEventTracker(this.documentLoadEvent),u.LastClick.init()},setCurrentEventTracker:function(e){e instanceof i.EventTracker&&(this.currentEventTracker&&(this.lastEventTracker=this.currentEventTracker),this.currentEventTracker=e,(e instanceof i.DocumentLoadTracker||e instanceof l.VirtualPageTracker)&&(this.lastPageTracker=e))},resetCurrentEventTracker:function(){this.currentEventTracker instanceof i.EventTracker&&(this.lastEventTracker=this.currentEventTracker),this.currentEventTracker=!1},detectAndSetEventTrackerForEvent:function(e,t,r){if("load"===e&&t.target instanceof HTMLDocument)this.setCurrentEventTracker(this.documentLoadEvent);else if(this.shouldIgnoreEvent(e,t)){var n=new s.IgnoreEventTracker(t.type,t,(!1));this.setCurrentEventTracker(n)}else if("load"===e&&t.target instanceof HTMLScriptElement);else if(r&&r._eumThread)this.setCurrentEventTracker(r._eumThread);else if(o.uaEvents.indexOf(t.type)>-1){var a=new o.UserActionTracker(t.type,t,(!1));this.setCurrentEventTracker(a)}else if("popstate"===e);else{var i=this.virtualPageLoadEvent||this.documentLoadEvent;this.setCurrentEventTracker(i)}},shouldIgnoreEvent:function(e,t){var r=!1;return s.ignoreEvents.indexOf(e)!==-1||s.animationEndEvents.indexOf(e)!==-1||t.target instanceof HTMLVideoElement?r=!0:t.target instanceof HTMLIFrameElement&&(r=!0),r},routeChange:function(e){if(this.firstVirtualPage&&!u.LastClick.hadClicked())return void(this.firstVirtualPage=!1);
var t=new l.VirtualPageTracker;null!=this.virtualPageLoadEvent&&this.virtualPageLoadEvent.reportVirtualPage(),this.setCurrentEventTracker(t),this.virtualPageLoadEvent=t},delayResetCurrentEventTracker:function(e){n&&d.origClearTimeout.call(window,n);var t=this;n=d.origSetTimeout.call(window,function(){t.resetCurrentEventTracker(),n=0},e)},addAjaxToEventTracker:function(e,r){for(var n=e||t.EventTrackerManager.lastPageTracker;n&&!(n instanceof l.VirtualPageTracker||n instanceof i.DocumentLoadTracker);)n=n.prevEventTracker;if(n){if(e instanceof o.UserActionTracker)return e.listOfAjax.push(r),void(e.lastPageTracker=n);this.reportAjax(n,r)||n.listOfAjax.push(r)}},reportAjax:function(e,t){if(e.reported){t.pg_perceived_dur=e.userPerceivedDur;var r=e.startTime;return e instanceof i.DocumentLoadTracker&&(r=a.WebUtils.getPageNavStart()),t.pg_start_time=c.reporter.normalizeClientTime(r),t.pg_sr_id=e.pageSrId,t.pg_tr_url=e.pageClassifiedURL,t.pg_url=e.pageURL,a.WebUtils.isError(t.resp_code)&&!e.xhrErrorReported&&(e.xhrErrorReported=!0,t.is_first_ajax_error=1,e.jsErrorReported||(t.is_first_error=1)),c.reporter.reportInstrumentation(t,c.reporter.xhrReqMetas,"xhr"),!0}return!1},reportAjaxFromPage:function(e,t){e.listOfAjax.forEach(function(r){r.resp_end<=t&&(r.ended_before_percv=1),this.reportAjax(e,r)},this)}}},function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=r(1),i=r(5),o=r(2),s=r(9),c=r(4),d=r(7),l=r(10),u=function(){function e(t,r,n){this.id=0,this.reported=!1,this.pageSrId=-1,this.pageClassifiedURL="",this.pageURL="",this.isVirtualPage=!1,this.hadAsync=!1,this.jsErrorReported=!1,this.xhrErrorReported=!1,this.prevEventTracker=null,this.type=t,this.startTime=Date.now(),this.counter=0,this.id=e.globalCounter++,this.event=r,this.target=r.target,this.images=[],this.instrumentType="d3",this.d3=!0,this.events=[],this.alerts=[],this.eventChain="",this.listOfAjax=[],this.prevEventTracker=d.EventTrackerManager.currentEventTracker||d.EventTrackerManager.lastEventTracker,null!=this.prevEventTracker&&(this.pageSrId=this.prevEventTracker.pageSrId,this.pageClassifiedURL=this.prevEventTracker.pageClassifiedURL,this.pageURL=this.prevEventTracker.pageURL,this.isVirtualPage=this.prevEventTracker.isVirtualPage)}return e.prototype.toString=function(){return"ID: "+this.id+" Type: "+this.type+" counter: "+this.counter+" instrument: "+this.instrumentType},e.isD4=function(e){return e>i.d4SplitThreshold},e.prototype.addAsync=function(e){this.counter++,this.hadAsync=!0},e.prototype.removeAsync=function(e,t){t=t||{},t.isCancellation||(this.lastPop=i.dateNow()),this.counter&&this.counter--,0===this.counter&&this.d3&&this.throttleCloseThread()},e.prototype.closeThread=function(){this.isReadyToReport()&&i.doReportProbe(this)},e.prototype.throttleCloseThread=function(e){void 0===e&&(e=6*i.d4SplitThreshold),this.throttle(this.closeThread,e)},e.prototype.shouldReportData=function(){return!this.reported},e.prototype.reportData=function(e){},e.prototype.didAllImageLoad=function(){for(var e=this.images,t=0,r=e.length;t<r;t++)if(!e[t].complete)return!1;return!0},e.prototype.throttle=function(e,t){this.throttleTimeoutId&&o.origClearTimeout.call(window,this.throttleTimeoutId),this.throttleTimeoutId=o.origSetTimeout.call(window,e.bind(this),t,null)},e.prototype.logPrefix=function(){return"EventTracker - "+this.type+" (id="+this.id+"): "},e.prototype.isReadyToReport=function(){return!1},e.prototype.getPageURIData=function(){return{pageSrId:this.pageSrId,pageClassifiedURL:this.pageClassifiedURL,pageURL:this.pageURL,isVirtualPage:this.isVirtualPage}},e.globalCounter=0,e}();t.EventTracker=u;var p=function(e){function t(){e.call(this,"document.load",{target:document},!1),this.domContentLoaded=!1,this.documentFinishedLoading=!1,this.networkObj=null,this.init()}return n(t,e),t.prototype.init=function(){function e(e){n.handleDocumentLoad()}this.pageSrId=c.reporter.pageSrId;var t=l.ClassificationMgr.classifyRealPageUrl(window.location.href);if(this.pageClassifiedURL=t.classifiedUrl,this.pageURL=t.rawUrl,window.addEventListener("load",e,!1),a.WebUtils.inlineExists())for(var r=0;r<window.APPW.docLoadCtr;r++)this.addAsync("inline");var n=this},t.prototype.closeThread=function(){e.prototype.closeThread.call(this),this.reported&&(d.EventTrackerManager.documentLoadEvent=!1)},t.prototype.handleDocumentLoad=function(){this.domContentLoaded=!0,s.RealPage.updateNavigationTiming(this)},t.prototype.isReadyToReport=function(){return!i.isIframe&&(!!(this.domContentLoaded&&this.documentFinishedLoading&&this.didAllImageLoad()&&0===this.counter)||(this.counter>0||this.domContentLoaded,!1))},t.prototype.reportData=function(e){var t=this.networkObj,r=t.ld_ev_end-t.nav_st;e<r&&(e=r),this.userPerceivedDur=e;var n=this.getPageURIData(),a={con_st:c.reporter.normalizeClientTime(t.con_st),con_end:c.reporter.normalizeClientTime(t.con_end),dom_lk_end:c.reporter.normalizeClientTime(t.dom_lk_end),dom_lk_st:c.reporter.normalizeClientTime(t.dom_lk_st),dom_con_ld_ev_end:c.reporter.normalizeClientTime(t.dom_con_ld_ev_end),dom_con_ld_ev_st:c.reporter.normalizeClientTime(t.dom_con_ld_ev_st),dom_complete:c.reporter.normalizeClientTime(t.dom_complete),fetch_st:c.reporter.normalizeClientTime(t.fetch_st),ld_ev_end:c.reporter.normalizeClientTime(t.ld_ev_end),ld_ev_st:c.reporter.normalizeClientTime(t.ld_ev_st),nav_st:c.reporter.normalizeClientTime(t.nav_st),nav_type:t.nt_nav_type,nt_red_cnt:t.nt_red_cnt,red_end:c.reporter.normalizeClientTime(t.red_end),red_st:c.reporter.normalizeClientTime(t.red_st),req_st:c.reporter.normalizeClientTime(t.req_st),res_st:c.reporter.normalizeClientTime(t.res_st),sec_con_st:c.reporter.normalizeClientTime(t.sec_con_st),unl_ev_end:c.reporter.normalizeClientTime(t.unl_ev_end),unl_ev_st:c.reporter.normalizeClientTime(t.unl_ev_st),res_end:c.reporter.normalizeClientTime(t.res_end),dom_intr:c.reporter.normalizeClientTime(t.dom_intr),dom_load:c.reporter.normalizeClientTime(t.dom_load),referrer:t.referrer,url:t.url,br_total_time:r,title:document.title,pg_ld_usr_percv:e,is_first:c.reporter.isFirst?1:0,sr_id:n.pageSrId,tr_url:n.pageClassifiedURL};c.reporter.reportInstrumentation(a,c.reporter.pageReqMetas,"realpage"),d.EventTrackerManager.reportAjaxFromPage(this,this.startTime+e),this.networkObj=null},t}(u);t.DocumentLoadTracker=p},function(e,t,r){var n=(r(1),r(2)),a=r(5),i=function(){function e(){}return e.updateNavigationTiming=function(e){n.origSetTimeout.call(window,function(){if("about:blank"!==window.location.href&&0!=document.URL.toLowerCase().indexOf("file://")){var t;if(t=window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance,t&&t.timing&&t.navigation){var r=a.dateNow(),n=window.performance.navigation,i=window.performance.timing;e&&(e.startTime=e.startTime<i.navigationStart?e.startTime:i.navigationStart),e.networkObj={};var o=e.getPageURIData(),s=e.networkObj;s.con_end=i.connectEnd,s.con_st=i.connectStart,s.dom_lk_end=i.domainLookupEnd,s.dom_lk_st=i.domainLookupStart,s.dom_con_ld_ev_end=i.domContentLoadedEventEnd,s.dom_con_ld_ev_st=i.domContentLoadedEventStart,s.dom_complete=i.domComplete,s.fetch_st=i.fetchStart,s.ld_ev_end=i.loadEventEnd,s.ld_ev_st=i.loadEventStart,s.nav_st=i.navigationStart,s.nt_nav_type=n.type,s.nt_red_cnt=0,s.red_end=i.redirectEnd,s.red_st=i.redirectStart,s.req_st=i.requestStart,s.res_st=i.responseStart,s.ext_time=r-i.responseStart,s.sec_con_st=i.secureConnectionStart,s.unl_ev_end=i.unloadEventEnd,s.unl_ev_st=i.unloadEventStart,s.res_end=i.responseEnd,s.dom_intr=i.domInteractive,s.dom_load=i.domLoading,s.referrer=document.referrer,s.url=o.pageURL,e.documentFinishedLoading=!0}}},0)},e}();t.RealPage=i},function(e,t,r){var n,a=r(1);!function(e){function t(e){return{rawUrl:a.WebUtils.maskParams(e),classifiedUrl:a.WebUtils.convertToCluster(e)}}function r(){return{rawUrl:a.WebUtils.maskParams(window.location.href),classifiedUrl:a.WebUtils.convertToCluster(a.WebUtils.getPageName(window.location.pathname+location.hash))}}function n(e){return{rawUrl:a.WebUtils.maskParams(e),classifiedUrl:a.WebUtils.convertToCluster(e)}}e.classifyRealPageUrl=t,e.classifyVirtualPageUrl=r,e.classifyAjaxUrl=n}(n=t.ClassificationMgr||(t.ClassificationMgr={}))},function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=(r(1),r(8)),i=r(7),o=r(12);t.uaEvents=["click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","keydown","keypress","keyup","change","input","search","select","submit","drag","copy","cut","paste","play","touchstart","touchcancel","touchend","touchmove"];var s=function(e){function t(t,r,n){e.call(this,t,r,n),this.attachedVirtualPageTracker=null,this._lastPageTracker=null,o.LastClick.onUAEvent(r,this)}return n(t,e),t.prototype.toString=function(){return"User Action, ID: "+this.id+" Type: "+this.type+" instrument: "+this.instrumentType},t.prototype.addAsync=function(t){e.prototype.addAsync.call(this,t),this.attachedVirtualPageTracker&&1==this.counter&&this.attachedVirtualPageTracker.addAsync("Click started the route change")},t.prototype.throttleCloseThread=function(e){void 0===e&&(e=i.EventTrackerManager.delayForUA),this.attachedVirtualPageTracker&&this.attachedVirtualPageTracker.removeAsync("Click started the route change has ended",{}),this.throttle(this.closeThread,e)},t.prototype.shouldReportData=function(){return!1},t.prototype.closeThread=function(){if(!(this.counter>0)){var e=this.attachedVirtualPageTracker||this._lastPageTracker;this.listOfAjax.forEach(function(t){i.EventTrackerManager.reportAjax(e,t)||e.listOfAjax.push(t)},this)}},t.prototype.attachVirtualPageTracker=function(e){this.attachedVirtualPageTracker=e,this.attachedVirtualPageTracker.startTime=Math.min(this.startTime,this.attachedVirtualPageTracker.startTime),this.counter>0&&this.attachedVirtualPageTracker.addAsync("Click started the route change")},Object.defineProperty(t.prototype,"lastPageTracker",{set:function(e){this._lastPageTracker=e},enumerable:!0,configurable:!0}),t}(a.EventTracker);t.UserActionTracker=s},function(e,t,r){var n,a=r(2),i=(r(1),r(11)),o=r(7);!function(e){function t(){l()}function r(){return p>0}function n(){return h}function s(e,t){d(e)&&c(e),t&&h.push(t)}function c(e){p=e.timeStamp,h=[]}function d(e){return e.timeStamp-u>p}function l(){var e=function(e){if(d(e)){c(e);var t=new i.UserActionTracker("Virtual Click",e,(!0));o.EventTrackerManager.setCurrentEventTracker(t),o.EventTrackerManager.delayResetCurrentEventTracker(u)}};e.uaEmptyCallback=!0,a.oldNodeEventListenerAdd.call(document,"click",e,!0)}var u=100,p=0,h=[];e.init=t,e.hadClicked=r,e.getUATrackers=n,e.onUAEvent=s}(n=t.LastClick||(t.LastClick={}))},function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=(r(1),r(8));t.ignoreEvents=["DOMSubtreeModified","message","orientationchange","resize","dataavailable","deviceorientation","devicemotion","online","offline","mouseover","mouseout","mousemove","stalled","visibilitychange","mozvisibilitychange","msvisibilitychange","webkitvisibilitychange"],t.animationEndEvents=["webkitTransitionEnd","transitionend","oTransitionEnd","otransitionend","MSTransitionEnd","transitionend","animationend","webkitAnimationEnd"];var i=function(e){function t(t,r,n){e.call(this,t,r,n)}return n(t,e),t.prototype.toString=function(){return"Ignore Event Tracker, ID: "+this.id+" Type: "+this.type+" instrument: "+this.instrumentType},t.prototype.addAsync=function(e){},t.prototype.removeAsync=function(e,t){},t.prototype.shouldReportData=function(){return!1},t}(a.EventTracker);t.IgnoreEventTracker=i},function(e,t,r){var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=(r(1),r(8)),i=r(7),o=r(5),s=r(4),c=r(10),d=r(12),l=function(e){function t(){e.call(this,"Virtual page",{target:document},!1),this.pageSrId=-1;var t=c.ClassificationMgr.classifyVirtualPageUrl();this.pageClassifiedURL=t.classifiedUrl,this.pageURL=t.rawUrl;var r=this.getRelatedClickTracker();if(r)for(var n=0;n<r.length;n++){var a=r[n];a.attachVirtualPageTracker(this)}0===this.counter&&this.d3&&(this.lastPop=Date.now(),this.throttleCloseThread())}return n(t,e),t.init=function(){window.addEventListener("popstate",function(){i.EventTrackerManager.routeChange("popstate")},!1),function(e){var t=e.pushState;e.pushState=function(r,n,a){return i.EventTrackerManager.routeChange("pushState"),t.apply(e,arguments)}}(window.history),function(e){var t=e.replaceState;e.replaceState=function(r){return i.EventTrackerManager.routeChange("replaceState"),t.apply(e,arguments)}}(window.history)},t.prototype.getRelatedClickTracker=function(){var e=d.LastClick.getUATrackers();return e},t.prototype.isReadyToReport=function(){return!(!this.didAllImageLoad()||0!==this.counter)||(this.counter>0,!1)},t.prototype.reportData=function(e){var t=this.getPageURIData();this.userPerceivedDur=e;var r={pg_st:s.reporter.normalizeClientTime(this.startTime),host_pg:"",pg_ld_usr_percv:e,pg_name:t.pageClassifiedURL,is_first:s.reporter.isFirst?1:0};s.reporter.reportInstrumentation(r,s.reporter.virtualPageReqMetas,"virtualpage"),i.EventTrackerManager.reportAjaxFromPage(this,this.startTime+e)},t.prototype.reportVirtualPage=function(){o.doReportProbe(this),i.EventTrackerManager.virtualPageLoadEvent=null},t.prototype.getPageURIData=function(){this.pageSrId=-1;var e=c.ClassificationMgr.classifyVirtualPageUrl();return this.pageClassifiedURL=e.classifiedUrl,this.pageURL=e.rawUrl,this.isVirtualPage=!0,{pageSrId:this.pageSrId,pageClassifiedURL:this.pageClassifiedURL,pageURL:this.pageURL,isVirtualPage:this.isVirtualPage}},t}(a.EventTracker);t.VirtualPageTracker=l},function(e,t,r){var n=r(1),a=r(2),i=r(4),o=r(7),s=function(){function e(){this.init()}return Object.defineProperty(e.prototype,"jsErrors",{get:function(){return this._jsErrors},set:function(e){this._jsErrors=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xhrErrors",{get:function(){return this._xhrErrors},set:function(e){this._xhrErrors=e},enumerable:!0,configurable:!0}),e.prototype.isFirstError=function(){return this.jsErrors+this.xhrErrors==1?1:0},e.prototype.isFirstJSError=function(){return 1==this.jsErrors?1:0},e.prototype.isFirstAjaxError=function(){return 1==this.xhrErrors?1:0},e.prototype.fixErrorData=function(e){var t=o.EventTrackerManager.lastPageTracker,r=t.getPageURIData();e.file_url=n.WebUtils.maskParams(e.file_url),e.msg=n.WebUtils.maskSensitiveData(e.msg),e.er_time=i.reporter.normalizeClientTime(e.er_time),e.sr_id=r.pageSrId,e.pg_tr_url=r.pageClassifiedURL,e.pg_url=r.pageURL,e.pg_start_time=n.WebUtils.getPageNavStart(),e.pg_is_virtual=r.isVirtualPage?1:0,t.jsErrorReported||(e.is_first_js_error=1,t.jsErrorReported=!0,t.xhrErrorReported||(e.is_first_error=1)),i.reporter.reportInstrumentation(e,i.reporter.jsErrorMetas,"error")},e.prototype.reportError=function(e,t,r,n,a,i){var o={file_url:e,msg:t,line:"undefined"!=typeof r?r:-1,col:"undefined"!=typeof n?n:-1,func:"TBD",name:a,trace:i,er_time:Date.now(),is_first_js_error:0,is_first_error:0};this.fixErrorData(o)},e.prototype.init=function(){this.sharedProp=n.WebUtils.inlineExists()?window.APPW.SHARED_PROPERTIES:null,this.jsErrors=this.sharedProp&&n.WebUtils.defined(this.sharedProp.jsErrors)?this.sharedProp.jsErrors:0,this.xhrErrors=this.sharedProp&&n.WebUtils.defined(this.sharedProp.xhrErrors)?this.sharedProp.xhrErrors:0;var e=this;window.onerror=function(t,r,n,i,o){var s="undefined"!=typeof o&&o?o.name:t,c="undefined"!=typeof o&&"undefined"!=typeof console?console.trace():"";e.reportError(r,t,n,i,s,c);try{a.origWindowError.apply(this,Array.prototype.slice.call(arguments))}catch(d){}},console.error=function(){"undefined"!=typeof arguments&&"undefined"!=typeof arguments[0]&&e.reportError("",arguments[0].split("\n")[0],-1,-1,"",arguments[0].split("\n")[0]);try{a.origConsoleError.apply(this,Array.prototype.slice.call(arguments))}catch(t){}}},e}(),c=new s;t.errorsHandler=c},function(e,t,r){var n=r(1),a=r(2),i=r(3),o=r(15),s=function(){function e(){this.init()}return e.prototype.init=function(){var e=this;a.origSetTimeout.call(window,function(){e.syncPrevReports()},0)},e.prototype.syncPrevReports=function(){if(n.WebUtils.inlineExists()){for(var e=window.APPW.DATA.errors,t=window.APPW.DATA.xhrs,r=0;r<e.length;r++){var a=e[r];o.errorsHandler.fixErrorData(a)}for(var r=0;r<t.length;r++){var s=t[r];i.XHRWrapper.reportNetworkData(s)}}},e}(),c=new s;t.instrumentationManager=c},function(e,t,r){function n(e,t,r,n){var a=!1,i=!1;if(u[t]&&delete u[t],e){if(r<=c.d4SplitThreshold){var o=n?n.toString()+"."+r:r;e.setTimeoutCallbacks||(e.setTimeoutCallbacks={}),e.setTimeoutCallbacks[o]||(e.setTimeoutCallbacks[o]=0),e.setTimeoutCallbacks[o]++,0!==r&&e.setTimeoutCallbacks[o]>=3&&e.d3&&(e.removeAsync("setTimeout->wrappedCallback",{isCancellation:!0}),i=!0)}a=e!==s.EventTrackerManager.currentEventTracker,i||s.EventTrackerManager.setCurrentEventTracker(e)}return{changedThread:a,d4Detected:i}}function a(e,t,r,n){e&&!t&&(e.removeAsync("setTimeout->wrappedCallback(1)"),n&&s.EventTrackerManager.resetCurrentEventTracker())}var i=(r(1),r(2)),o=r(8),s=r(7),c=r(5),d=r(4),l=r(13),u={};(function(){function e(){this.overrideInlineFuncs()}return e.prototype.overrideInlineFuncs=function(){console.log("SetTimeout: Overriding inline funcs"),d.inlineFuncs.beforeSTCB=function(){console.log("new beforeSTCB"),n(s.EventTrackerManager.currentEventTracker,-1,100,function(){})},d.inlineFuncs.afterSTCB=function(){console.log("new afterSTCB"),a(s.EventTrackerManager.currentEventTracker,!1,100,"")},d.inlineFuncs.fixET=function(e){console.log("The new fixET: "+e),"DL"===e?s.EventTrackerManager.currentEventTracker=s.EventTrackerManager.documentLoadEvent:s.EventTrackerManager.currentEventTracker=new l.IgnoreEventTracker("","",(!1))}},e})();window.setTimeout=function(e,t){if(console.log("Full instrumentation in Action for setTimeout"),void 0===t&&(t=0),o.EventTracker.isD4(t))return i.origSetTimeout.apply(window,arguments);if(!s.EventTrackerManager.currentEventTracker)return i.origSetTimeout.apply(window,arguments);var r=[];if(arguments.length>2)for(var d=2;d<arguments.length;d++)r.push(arguments[d]);var l=s.EventTrackerManager.currentEventTracker;if(l.setTimeoutCallbacks){var p=e?e.toString()+"."+t:t;if(l.setTimeoutCallbacks[p]>=3)return i.origSetTimeout.apply(window,arguments)}l&&(l.eventChain+="T->"+t+";",l.addAsync("setTimeout"));var h=function(){var i=n(l,f,t,e),o=i.changedThread,s=i.d4Detected;try{c.doCallback(window,e,"setTimeout",r,l)}catch(d){}a(l,s,t,o)},f=i.origSetTimeout.call(window,h,t);return l&&(u[f]=l),f},window.clearTimeout=function(e){i.origClearTimeout.call(window,e),u[e]&&(u[e].removeAsync("clearTimeout",{isCancellation:!0}),u[e].d3,delete u[e])}},function(e,t,r){var n,a=(r(1),r(7)),i=r(2);!function(e){i.origPromiseThen&&(window.Promise.prototype.then=function(e,t){var r=this,n=a.EventTrackerManager.currentEventTracker;if(n){var o=e,s=t;if(o)var c=function(){n.addAsync("Promise(then - onFulfilled)"),a.EventTrackerManager.setCurrentEventTracker(n);var e;try{e=o.apply(r,arguments)}finally{a.EventTrackerManager.resetCurrentEventTracker(),n.removeAsync("Promise(then - onFulfilled)")}return e};if(s)var d=function(){n.addAsync("Promise(then - onRejected)"),a.EventTrackerManager.setCurrentEventTracker(n);var e;try{e=s.apply(r,arguments)}finally{a.EventTrackerManager.resetCurrentEventTracker(),n.removeAsync("Promise(then - onRejected)")}return e}}return i.origPromiseThen.call(r,c?c:e,d?d:t)})}(n||(n={}))}]))}();
//# sourceMappingURL=instrument-all.min.js.map